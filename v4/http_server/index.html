
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The atoms of your platform">
      
      
        <meta name="author" content="Hexagon Toolkit">
      
      
        <link rel="canonical" href="https://hexagontk.com/v4/http_server/">
      
      
        <link rel="prev" href="../http_handlers/">
      
      
        <link rel="next" href="../http_client/">
      
      
      <link rel="icon" href="../favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>HTTP Server - Hexagon</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Titillium Web";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/mkdocs.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-BEKWF2E4DJ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-BEKWF2E4DJ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-BEKWF2E4DJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<meta name="keywords" content="Hexagon, microservices, Kotlin, RabbitMQ, MongoDB, JVM, Web, Toolkit, Framework" />
<meta name="theme-color" content="#135AA1" />

<link rel="apple-touch-icon" sizes="180x180" href="/icon-small.png" />
<link rel="icon" sizes="32x32" href="/favicon.png">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@hexagontk">

<meta property="og:title" content="Hexagon" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://hexagontk.com/v4" />
<meta property="og:image" content="https://hexagontk.com/v4icon-small.png" />
<meta property="og:description" content="Hexagon is a microservices toolkit written in Kotlin. Its purpose is to ease the building of services (Web applications or APIs) that run inside a cloud platform
" />

<link rel="author" href="/humans.txt" />
<link rel="manifest" href="/manifest.json">


  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-http_server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Hexagon" class="md-header__button md-logo" aria-label="Hexagon" data-md-component="logo">
      
  <img src="../img/logo_white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hexagon
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              HTTP Server
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/hexagontk/hexagon" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    hexagontk/hexagon
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href=".." class="md-tabs__link">
          
  
  
  Documentation

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../api/" class="md-tabs__link">
        
  
  
    
  
  API

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../examples/example_projects/" class="md-tabs__link">
          
  
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../help/" class="md-tabs__link">
          
  
  
  Community

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Hexagon" class="md-nav__button md-logo" aria-label="Hexagon" data-md-component="logo">
      
  <img src="../img/logo_white.svg" alt="logo">

    </a>
    Hexagon
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hexagontk/hexagon" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    hexagontk/hexagon
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quick_start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Handlers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../http_handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTP Handlers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    HTTP Server
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    HTTP Server
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#module-http_server" class="md-nav__link">
    <span class="md-ellipsis">
      Module http_server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module http_server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-the-dependency" class="md-nav__link">
    <span class="md-ellipsis">
      Install the Dependency
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-on-http-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Context on HTTP processing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#servers" class="md-nav__link">
    <span class="md-ellipsis">
      Servers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Servers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#servlet-web-server" class="md-nav__link">
    <span class="md-ellipsis">
      Servlet Web server
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-context" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP Context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Handlers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler-predicates" class="md-nav__link">
    <span class="md-ellipsis">
      Handler Predicates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handler Predicates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Path Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler-types" class="md-nav__link">
    <span class="md-ellipsis">
      Handler Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handler Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#on-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      On Handlers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      After Handlers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filters" class="md-nav__link">
    <span class="md-ellipsis">
      Filters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Path Handlers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler-callbacks" class="md-nav__link">
    <span class="md-ellipsis">
      Handler Callbacks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handler Callbacks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request" class="md-nav__link">
    <span class="md-ellipsis">
      Request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Path Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Query Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#form-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Form Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      File Uploads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response" class="md-nav__link">
    <span class="md-ellipsis">
      Response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redirects" class="md-nav__link">
    <span class="md-ellipsis">
      Redirects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookies" class="md-nav__link">
    <span class="md-ellipsis">
      Cookies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-errors-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP Errors Handlers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Exception Mapping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static-files" class="md-nav__link">
    <span class="md-ellipsis">
      Static Files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Static Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#media-types" class="md-nav__link">
    <span class="md-ellipsis">
      Media Types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors" class="md-nav__link">
    <span class="md-ellipsis">
      CORS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#https" class="md-nav__link">
    <span class="md-ellipsis">
      HTTPS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#websockets" class="md-nav__link">
    <span class="md-ellipsis">
      WebSockets
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compression" class="md-nav__link">
    <span class="md-ellipsis">
      Compression
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Integration Tests
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-comhexagontkhttpserver" class="md-nav__link">
    <span class="md-ellipsis">
      Package com.hexagontk.http.server
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-comhexagontkhttpservercallbacks" class="md-nav__link">
    <span class="md-ellipsis">
      Package com.hexagontk.http.server.callbacks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-comhexagontkhttpserverhandlers" class="md-nav__link">
    <span class="md-ellipsis">
      Package com.hexagontk.http.server.handlers
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../http_client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTP Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serialization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serialization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gradle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gradle Helpers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maven/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maven Parent POM
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_projects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Example Projects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Code Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Code Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/http_server_examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTP Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/http_client_examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTP Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/templates_examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/serialization_examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serialization
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Community
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Community
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../help/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Help and Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/hexagontk/hexagon/contribute" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing ↗
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/hexagontk" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub ↗
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://dev.to/hexagontk" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dev.to ↗
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://kotlin.libhunt.com/hexagon-alternatives" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LibHunt ↗
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://stackshare.io/hexagon" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StackShare ↗
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#module-http_server" class="md-nav__link">
    <span class="md-ellipsis">
      Module http_server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module http_server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-the-dependency" class="md-nav__link">
    <span class="md-ellipsis">
      Install the Dependency
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-on-http-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Context on HTTP processing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#servers" class="md-nav__link">
    <span class="md-ellipsis">
      Servers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Servers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#servlet-web-server" class="md-nav__link">
    <span class="md-ellipsis">
      Servlet Web server
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-context" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP Context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Handlers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler-predicates" class="md-nav__link">
    <span class="md-ellipsis">
      Handler Predicates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handler Predicates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Path Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler-types" class="md-nav__link">
    <span class="md-ellipsis">
      Handler Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handler Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#on-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      On Handlers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      After Handlers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filters" class="md-nav__link">
    <span class="md-ellipsis">
      Filters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Path Handlers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler-callbacks" class="md-nav__link">
    <span class="md-ellipsis">
      Handler Callbacks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handler Callbacks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request" class="md-nav__link">
    <span class="md-ellipsis">
      Request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Path Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Query Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#form-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Form Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      File Uploads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response" class="md-nav__link">
    <span class="md-ellipsis">
      Response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redirects" class="md-nav__link">
    <span class="md-ellipsis">
      Redirects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookies" class="md-nav__link">
    <span class="md-ellipsis">
      Cookies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-errors-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP Errors Handlers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Exception Mapping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static-files" class="md-nav__link">
    <span class="md-ellipsis">
      Static Files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Static Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#media-types" class="md-nav__link">
    <span class="md-ellipsis">
      Media Types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors" class="md-nav__link">
    <span class="md-ellipsis">
      CORS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#https" class="md-nav__link">
    <span class="md-ellipsis">
      HTTPS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#websockets" class="md-nav__link">
    <span class="md-ellipsis">
      WebSockets
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compression" class="md-nav__link">
    <span class="md-ellipsis">
      Compression
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Integration Tests
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-comhexagontkhttpserver" class="md-nav__link">
    <span class="md-ellipsis">
      Package com.hexagontk.http.server
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-comhexagontkhttpservercallbacks" class="md-nav__link">
    <span class="md-ellipsis">
      Package com.hexagontk.http.server.callbacks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-comhexagontkhttpserverhandlers" class="md-nav__link">
    <span class="md-ellipsis">
      Package com.hexagontk.http.server.handlers
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>HTTP Server</h1>

<h2 id="module-http_server">Module http_server<a class="headerlink" href="#module-http_server" title="Permanent link">&para;</a></h2>
<p>This port's purpose is to develop HTTP servers (REST services or Web applications). Servers will
handle connections in order to process requests using <a href="../http_handlers/">HTTP handlers</a>.</p>
<p>Adapters implementing this port are in charge of starting up a server to handle incoming
connections, convert requests to the Hexagon model, process these requests using the supplied
<a href="../http_handlers/">HTTP handlers</a>, convert the generated response to the server format and send it to the client.</p>
<h3 id="install-the-dependency">Install the Dependency<a class="headerlink" href="#install-the-dependency" title="Permanent link">&para;</a></h3>
<p>This module is not meant to be used directly. You should include and Adapter implementing this
feature (as <a href="../http_server_jetty/">http_server_jetty</a>) in order to create an HTTP server.</p>
<h2 id="context-on-http-processing">Context on HTTP processing<a class="headerlink" href="#context-on-http-processing" title="Permanent link">&para;</a></h2>
<p>An HTTP server is nothing more than a function that takes a request and returns a response. Requests
and responses comply with several Web standards.</p>
<p>For the sake of ease of use, HTTP toolkits (or frameworks) are built. These tools make easier to
write an HTTP server that has to deal with different behaviour based on requests attributes.</p>
<p>These development tools usually have different layers/parts (the ones below are some of the most
common ones):</p>
<ul>
<li>IO: sockets and buffers management, SSL and thread scheduling is usually handled here also.</li>
<li>HTTP messages parsing: parse requests to internal model and serialize responses to bytes.</li>
<li>Routing: makes easy to run different blocks of code based on requests (usually supporting
  pipelining among different blocks).</li>
</ul>
<p>Hexagon takes care of the third layer, it's "just" an abstraction layer for the IO engine and HTTP
parser underneath, those two layers depends on the adapter (which you can select from a few
alternatives).</p>
<p>This particularity allows users to swap adapters for different use cases. For example, You can use a
low memory for embedded boards (as Raspberry Pi) or high through-output for servers, another use
case would be to use a fast boot adapter for development, and select a different one for production.</p>
<p>To be agnostic of the adapter below, a custom HTTP model is implemented in Hexagon, and adapters
must map their own structures to this model.</p>
<p>Now we'll talk about how HTTP routing is done in the toolkit. The cornerstone of HTTP handling in
Hexagon is the handler: Hexagon handlers are a list of functions that may or may not be applied to
an HTTP call depending on a predicate.</p>
<p>Handlers have a predicate, and they are only applied to a given request if the current request
matches the predicate.</p>
<p>The functions that handle HTTP requests (named 'callbacks' in Hexagon) are blocks of code that get
an HTTP call and return an HTTP call (probably the received one with a modified response),
callbacks operate on immutable structures (the HTTP model).</p>
<p>Below you can find an in deep description of the concepts and components of this toolkit.</p>
<h2 id="servers">Servers<a class="headerlink" href="#servers" title="Permanent link">&para;</a></h2>
<p>A server is a process listening to HTTP requests on a TCP port.</p>
<p>You can run multiple ones on different ports at the same time on the same JVM (this can be useful to
test many microservices at the same time).</p>
<p>The server can be <a href="../api/http/http_server/com.hexagontk.http.server/-http-server-settings">configured with different properties</a>. If you do not provide a
value for them, they are searched inside the application settings and lastly, a default value is
picked. This is the parameters list:</p>
<ul>
<li>bindAddress: address to which this process is bound. If none is provided, <code>127.0.0.1</code> is taken.</li>
<li>bindPort: the port which the process listens to. By default, it is <code>2010</code>.</li>
</ul>
<p>To create a server, you need to provide a handler (check the <a href="#handlers">handlers section</a> for more
information), and after creating a server you can run it or stop it with <a href="../api/http/http_server/com.hexagontk.http.server/-http-server">start()</a> and <a href="../api/http/http_server/com.hexagontk.http.server/-http-server">stop()</a>
methods.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cm">/*</span>
<span class="cm"> * All settings are optional, you can supply any combination</span>
<span class="cm"> * Parameters not set will fall back to the defaults</span>
<span class="cm"> */</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HttpServerSettings</span><span class="p">(</span>
<span class="w">    </span><span class="n">bindAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InetAddress</span><span class="p">.</span><span class="na">getByName</span><span class="p">(</span><span class="s">&quot;0.0.0&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">bindPort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2020</span><span class="p">,</span>
<span class="p">)</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * You may skip the settings parameter and the defaults will be used</span>
<span class="cm"> */</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">runningServer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">serve</span><span class="p">(</span><span class="n">serverAdapter</span><span class="p">(),</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">settings</span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">bindPort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">))</span>

<span class="c1">// Servers implement closeable, you can use them inside a block assuring they will be closed</span>
<span class="n">runningServer</span><span class="p">.</span><span class="na">use</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">HttpClient</span><span class="p">(</span><span class="n">clientAdapter</span><span class="p">(),</span><span class="w"> </span><span class="n">HttpClientSettings</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="na">binding</span><span class="p">)).</span><span class="na">use</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">it</span><span class="p">.</span><span class="na">start</span><span class="p">()</span>
<span class="w">        </span><span class="n">assert</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="na">started</span><span class="p">())</span>
<span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">).</span><span class="na">body</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="servlet-web-server">Servlet Web server<a class="headerlink" href="#servlet-web-server" title="Permanent link">&para;</a></h3>
<p>There is a special server adapter for running inside Servlet Containers. To use it you should import
the Servlet HTTP Server Adapter into your project. Check the <a href="../http_server_servlet/">http_server_servlet</a> module for more
information.</p>
<h2 id="http-context">HTTP Context<a class="headerlink" href="#http-context" title="Permanent link">&para;</a></h2>
<p>These are the events that the handlers handle (they are also called HTTP calls or just calls along
this documentation). They wrap HTTP requests and responses along with some attributes that may be
used to pass data across handlers or to signal that a previous callback resulted in an error.</p>
<p>The HTTP context provides you with everything you need to handle an HTTP request. It contains the
request, the response, and a bunch of utility methods to return results, read parameters or pass
attributes among handlers.</p>
<p>The methods are available directly from the callback. You can check the <a href="../api/http/http_handlers/com.hexagontk.http.handlers/-http-context">API documentation</a> for the
full list of methods. This sample code illustrates the usage:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">get</span><span class="p">(</span><span class="s">&quot;/call&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">attributes</span><span class="w">          </span><span class="c1">// The attributes list</span>
<span class="w">    </span><span class="n">attributes</span><span class="o">[</span><span class="s">&quot;foo&quot;</span><span class="o">]</span><span class="w">   </span><span class="c1">// Value of foo attribute</span>

<span class="w">    </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Response body&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// Returns a 200 status</span>
<span class="w">    </span><span class="c1">// return any status (previous return value is ignored here)</span>
<span class="w">    </span><span class="n">send</span><span class="p">(</span>
<span class="w">        </span><span class="n">BAD_REQUEST_400</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;Invalid request&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">attributes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;V&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// Sets value of attribute A to V</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="handlers">Handlers<a class="headerlink" href="#handlers" title="Permanent link">&para;</a></h2>
<p>The main building blocks of Hexagon HTTP services are a set of handlers. A handler is made up of two
simple pieces:</p>
<ul>
<li>A <strong>predicate</strong>: which decides if the handler should be executed for a given request.</li>
<li>A <strong>callback</strong>: code that receives an HTTP context and returns another (or the same) context.</li>
</ul>
<p>IMPORTANT: the order in which handlers are declared is NOT the order, it is the depth. Handlers are
not linked, they are NESTED. The <a href="../api/http/http_handlers/com.hexagontk.http.handlers/-http-context">next()</a> method passes control to the next level. If
<a href="../api/http/http_handlers/com.hexagontk.http.handlers/-http-context">next()</a> is not called in a Handler, following Handlers WON'T be executed (However, the
"after" part of already executed Handlers will be run).</p>
<p>For example, this definition:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>H1
H2
H3
</code></pre></div></td></tr></table></div>
<p>Is really this execution:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>H1 (on)
  H2 (on)
    H3 (on)
  H2 (after)
H1 (after)
</code></pre></div></td></tr></table></div>
<p>Check the next snippet for Handlers usage examples:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Get greeting&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="n">put</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Put greeting&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="n">post</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Post greeting&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="n">on</span><span class="p">(</span><span class="n">ALL</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">GET</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">PUT</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">POST</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Fallback if HTTP verb was not used before&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="n">on</span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NOT_FOUND_404</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Get at &#39;/&#39; if no route matched before&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!-- TODO Start document review -->

<h2 id="handler-predicates">Handler Predicates<a class="headerlink" href="#handler-predicates" title="Permanent link">&para;</a></h2>
<p>A predicate is a function that is applied to a call context and returns a boolean. If the result is
true, the handler will be executed.</p>
<p>The default implementation (<a href="../api/http/http_handlers/com.hexagontk.http.handlers/-http-predicate">HttpPredicate</a>) is based on a template with any combination of
the following fields:</p>
<ul>
<li>a list of HTTP methods</li>
<li>a path pattern</li>
<li>an exception</li>
<li>a status</li>
</ul>
<p>It yields true if all the supplied fields matches a call context.</p>
<h3 id="path-patterns">Path Patterns<a class="headerlink" href="#path-patterns" title="Permanent link">&para;</a></h3>
<p>Patterns to match requests paths. They can have:</p>
<ul>
<li>Variables: <code>/path/{param}</code></li>
<li>Wildcards: <code>/*/path</code></li>
<li>Regular expresión subset: <code>/(this|that)/path</code></li>
</ul>
<h2 id="handler-types">Handler Types<a class="headerlink" href="#handler-types" title="Permanent link">&para;</a></h2>
<h3 id="on-handlers">On Handlers<a class="headerlink" href="#on-handlers" title="Permanent link">&para;</a></h3>
<ul>
<li>Predicate evaluated at start</li>
<li>Executed at the start (before the 'next' handler is called)</li>
</ul>
<h3 id="after-handlers">After Handlers<a class="headerlink" href="#after-handlers" title="Permanent link">&para;</a></h3>
<ul>
<li>Predicate evaluated at end (checked on the coming back of the execution next handler)</li>
<li>Executed at the end (after 'next' handler has returned)</li>
</ul>
<h3 id="filters">Filters<a class="headerlink" href="#filters" title="Permanent link">&para;</a></h3>
<p>You might know filters as interceptors, or middleware from other libraries. Filters are blocks of
code executed before and/or after other handlers. They can read the request, read/modify the
response, and call the remaining handlers or skip them to halt the call processing.</p>
<p>All filters that match a route are executed in the order they are declared.</p>
<p>Filters optionally take a pattern, causing them to be executed only if the request path matches
that pattern.</p>
<p>The following code details filters usage:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">before</span><span class="p">(</span><span class="s">&quot;/*&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="n">response</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;b-all&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">}</span>

<span class="n">before</span><span class="p">(</span><span class="s">&quot;/filters/*&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="n">response</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;b-filters&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">}</span>
<span class="k">get</span><span class="p">(</span><span class="s">&quot;/filters/route&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;filters route&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="n">after</span><span class="p">(</span><span class="s">&quot;/filters/*&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="n">response</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;a-filters&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">}</span>

<span class="k">get</span><span class="p">(</span><span class="s">&quot;/filters&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;filters&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="n">path</span><span class="p">(</span><span class="s">&quot;/nested&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">before</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="n">response</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;b-nested&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">before</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="n">response</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;b-nested-2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="k">get</span><span class="p">(</span><span class="s">&quot;/filters&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;nested filters&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="k">get</span><span class="p">(</span><span class="s">&quot;/halted&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="m">499</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;halted&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="k">get</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;nested also&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">after</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="n">response</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;a-nested&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">after</span><span class="p">(</span><span class="s">&quot;/*&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="n">response</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;a-all&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="path-handlers">Path Handlers<a class="headerlink" href="#path-handlers" title="Permanent link">&para;</a></h3>
<p>Handlers can be grouped by calling the <code>path()</code> method, which takes a String prefix and gives you a
scope to declare other handlers. Ie:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">path</span><span class="p">(</span><span class="s">&quot;/nested&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Greeting&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="n">path</span><span class="p">(</span><span class="s">&quot;/secondLevel&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Second level greeting&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">get</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Get at &#39;/nested&#39;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>If you have a lot of routes, it can be helpful to group them into Path Handlers. You can create path
handlers to mount a group of routes in different paths (allowing you to reuse them). Check this
snippet:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">personRouter</span><span class="p">(</span><span class="n">kind</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">get</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Get </span><span class="si">$</span><span class="n">kind</span><span class="s">&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">put</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Put </span><span class="si">$</span><span class="n">kind</span><span class="s">&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">post</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Post </span><span class="si">$</span><span class="n">kind</span><span class="s">&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HttpServer</span><span class="p">(</span><span class="n">serverAdapter</span><span class="p">(),</span><span class="w"> </span><span class="n">HttpServerSettings</span><span class="p">(</span><span class="n">bindPort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">path</span><span class="p">(</span><span class="s">&quot;/clients&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">personRouter</span><span class="p">(</span><span class="s">&quot;client&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="n">path</span><span class="p">(</span><span class="s">&quot;/customers&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">personRouter</span><span class="p">(</span><span class="s">&quot;customer&quot;</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="handler-callbacks">Handler Callbacks<a class="headerlink" href="#handler-callbacks" title="Permanent link">&para;</a></h2>
<p>Callbacks are request's handling blocks that are bound to handlers. They make the request and
response objects available to the handling code.</p>
<p>Callbacks produce a result by returning the received HTTP context with a different response.
Callbacks results are the input for the next handler's callbacks in the pipeline.</p>
<h3 id="request">Request<a class="headerlink" href="#request" title="Permanent link">&para;</a></h3>
<p>Request functionality is provided by the <code>request</code> field:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">get</span><span class="p">(</span><span class="s">&quot;/request&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// URI Information</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">method</span><span class="w">                   </span><span class="c1">// The HTTP method (GET, etc.)</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">protocol</span><span class="w">                 </span><span class="c1">// HTTP or HTTPS</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">host</span><span class="w">                     </span><span class="c1">// The host, e.g. &quot;example.com&quot;</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">port</span><span class="w">                     </span><span class="c1">// The server port</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">path</span><span class="w">                     </span><span class="c1">// The request path, e.g. /result.jsp</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">body</span><span class="w">                     </span><span class="c1">// Request body sent by the client</span>

<span class="w">    </span><span class="n">method</span><span class="w">                           </span><span class="c1">// Shortcut of `request.method`</span>
<span class="w">    </span><span class="n">protocol</span><span class="w">                         </span><span class="c1">// Shortcut of `request.protocol`</span>
<span class="w">    </span><span class="n">host</span><span class="w">                             </span><span class="c1">// Shortcut of `request.host`</span>
<span class="w">    </span><span class="n">port</span><span class="w">                             </span><span class="c1">// Shortcut of `request.port`</span>
<span class="w">    </span><span class="n">path</span><span class="w">                             </span><span class="c1">// Shortcut of `request.path`</span>

<span class="w">    </span><span class="c1">// Headers</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">headers</span><span class="w">                  </span><span class="c1">// The HTTP headers map</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">headers</span><span class="o">[</span><span class="s">&quot;BAR&quot;</span><span class="o">]?.</span><span class="na">value</span><span class="w">    </span><span class="c1">// First value of BAR header</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">headers</span><span class="p">.</span><span class="na">getAll</span><span class="p">(</span><span class="s">&quot;BAR&quot;</span><span class="p">)</span><span class="w">       </span><span class="c1">// List of values of BAR header</span>

<span class="w">    </span><span class="c1">// Common headers shortcuts</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">contentType</span><span class="w">              </span><span class="c1">// Content type of request.body</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">accept</span><span class="w">                   </span><span class="c1">// Client accepted content types</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">authorization</span><span class="w">            </span><span class="c1">// Client authorization</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">userAgent</span><span class="p">()</span><span class="w">              </span><span class="c1">// User agent (browser requests)</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">origin</span><span class="p">()</span><span class="w">                 </span><span class="c1">// Origin (browser requests)</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">referer</span><span class="p">()</span><span class="w">                </span><span class="c1">// Referer header (page that makes the request)</span>

<span class="w">    </span><span class="n">accept</span><span class="w">                           </span><span class="c1">// Shortcut of `request.accept`</span>
<span class="w">    </span><span class="n">authorization</span><span class="w">                    </span><span class="c1">// Shortcut of `request.authorization`</span>

<span class="w">    </span><span class="c1">// Parameters</span>
<span class="w">    </span><span class="n">pathParameters</span><span class="w">                    </span><span class="c1">// Map with all path parameters</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">formParameters</span><span class="w">            </span><span class="c1">// Map with all form fields</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">queryParameters</span><span class="w">           </span><span class="c1">// Map with all query parameters</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">parts</span><span class="w">                     </span><span class="c1">// List of all body parts</span>

<span class="w">    </span><span class="n">queryParameters</span><span class="w">                   </span><span class="c1">// Shortcut of `request.queryParameters`</span>
<span class="w">    </span><span class="n">formParameters</span><span class="w">                    </span><span class="c1">// Shortcut of `request.formParameters`</span>
<span class="w">    </span><span class="n">parts</span><span class="w">                             </span><span class="c1">// Shortcut of `request.parts`</span>

<span class="w">    </span><span class="c1">// Body processing</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">contentLength</span><span class="w">             </span><span class="c1">// Length of request body</span>

<span class="w">    </span><span class="n">ok</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="path-parameters">Path Parameters<a class="headerlink" href="#path-parameters" title="Permanent link">&para;</a></h3>
<p>Route patterns can include named parameters, accessible via the <code>pathParameters</code> map on the request
object:</p>
<p>Path parameters can be accessed by name or by index.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">get</span><span class="p">(</span><span class="s">&quot;/pathParam/{foo}&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">pathParameters</span><span class="o">[</span><span class="s">&quot;foo&quot;</span><span class="o">]</span><span class="w"> </span><span class="c1">// Value of foo path parameter</span>
<span class="w">    </span><span class="n">pathParameters</span><span class="w">        </span><span class="c1">// Map with all parameters</span>
<span class="w">    </span><span class="n">ok</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="query-parameters">Query Parameters<a class="headerlink" href="#query-parameters" title="Permanent link">&para;</a></h3>
<p>It is possible to access the whole query string or only a specific query parameter using the
<code>parameters</code> map on the <code>request</code> object:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">get</span><span class="p">(</span><span class="s">&quot;/queryParam&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">queryParameters</span><span class="w">                      </span><span class="c1">// The query params map</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">queryParameters</span><span class="o">[</span><span class="s">&quot;FOO&quot;</span><span class="o">]?.</span><span class="na">value</span><span class="w">        </span><span class="c1">// Value of FOO query param</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">queryParameters</span><span class="p">.</span><span class="na">getAll</span><span class="p">(</span><span class="s">&quot;FOO&quot;</span><span class="p">)</span><span class="w">           </span><span class="c1">// All values of FOO query param</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">queryParameters</span><span class="p">.</span><span class="na">values</span><span class="w">               </span><span class="c1">// The query params list</span>

<span class="w">    </span><span class="n">ok</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="form-parameters">Form Parameters<a class="headerlink" href="#form-parameters" title="Permanent link">&para;</a></h3>
<p>HTML Form processing. Don't parse body!</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">get</span><span class="p">(</span><span class="s">&quot;/formParam&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">formParameters</span><span class="w">                       </span><span class="c1">// The form params map</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">formParameters</span><span class="o">[</span><span class="s">&quot;FOO&quot;</span><span class="o">]?.</span><span class="na">value</span><span class="w">         </span><span class="c1">// Value of FOO form param</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">formParameters</span><span class="p">.</span><span class="na">getAll</span><span class="p">(</span><span class="s">&quot;FOO&quot;</span><span class="p">)</span><span class="w">            </span><span class="c1">// All values of FOO form param</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">formParameters</span><span class="p">.</span><span class="na">values</span><span class="w">                </span><span class="c1">// The form params list</span>
<span class="w">    </span><span class="n">ok</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="file-uploads">File Uploads<a class="headerlink" href="#file-uploads" title="Permanent link">&para;</a></h3>
<p>Multipart Requests</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">post</span><span class="p">(</span><span class="s">&quot;/file&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">filePart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">partsMap</span><span class="p">()</span><span class="o">[</span><span class="s">&quot;file&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="n">error</span><span class="p">(</span><span class="s">&quot;File not available&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ok</span><span class="p">(</span><span class="n">filePart</span><span class="p">.</span><span class="na">body</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="response">Response<a class="headerlink" href="#response" title="Permanent link">&para;</a></h3>
<p>Response information is provided by the <code>response</code> field:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">get</span><span class="p">(</span><span class="s">&quot;/response&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">response</span><span class="p">.</span><span class="na">body</span><span class="w">                     </span><span class="c1">// Get response content</span>
<span class="w">    </span><span class="n">response</span><span class="p">.</span><span class="na">status</span><span class="w">                   </span><span class="c1">// Get the response status</span>
<span class="w">    </span><span class="n">response</span><span class="p">.</span><span class="na">contentType</span><span class="w">              </span><span class="c1">// Get the content type</span>

<span class="w">    </span><span class="n">status</span><span class="w">                            </span><span class="c1">// Shortcut of `response.status`</span>

<span class="w">    </span><span class="n">send</span><span class="p">(</span>
<span class="w">        </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UNAUTHORIZED_401</span><span class="p">,</span><span class="w">                  </span><span class="c1">// Set status code to 401</span>
<span class="w">        </span><span class="n">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w">                             </span><span class="c1">// Sets content to Hello</span>
<span class="w">        </span><span class="n">contentType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ContentType</span><span class="p">(</span><span class="n">APPLICATION_XML</span><span class="p">),</span><span class="w"> </span><span class="c1">// Set application/xml content type</span>
<span class="w">        </span><span class="n">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="na">headers</span>
<span class="w">            </span><span class="o">+</span><span class="w"> </span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bar&quot;</span><span class="p">)</span><span class="w">    </span><span class="c1">// Sets header FOO with single value bar</span>
<span class="w">            </span><span class="o">+</span><span class="w"> </span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;baz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="o">+</span><span class="w"> </span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;baz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="p">)</span><span class="w">      </span><span class="c1">// Sets header FOO values with [ bar ]</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="c1">// Utility methods for generating common responses</span>
<span class="w">    </span><span class="n">unauthorized</span><span class="p">(</span><span class="s">&quot;401: authorization missing&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">forbidden</span><span class="p">(</span><span class="s">&quot;403: access not granted&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">internalServerError</span><span class="p">(</span><span class="s">&quot;500: server error&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">serverError</span><span class="p">(</span><span class="n">NOT_IMPLEMENTED_501</span><span class="p">,</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Correct&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">badRequest</span><span class="p">(</span><span class="s">&quot;400: incorrect request&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">notFound</span><span class="p">(</span><span class="s">&quot;404: Missing resource&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">created</span><span class="p">(</span><span class="s">&quot;201: Created&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">redirect</span><span class="p">(</span><span class="n">FOUND_302</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/location&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">found</span><span class="p">(</span><span class="s">&quot;/location&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// The response can be modified chaining send calls (or its utility methods)</span>
<span class="w">    </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Replacing headers&quot;</span><span class="p">).</span><span class="na">send</span><span class="p">(</span><span class="n">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Headers</span><span class="p">())</span>

<span class="w">    </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Intending to replace headers&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>To send error responses:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">get</span><span class="p">(</span><span class="s">&quot;/halt&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">send</span><span class="p">(</span><span class="n">UNAUTHORIZED_401</span><span class="p">)</span><span class="w">              </span><span class="c1">// Halt with status</span>
<span class="w">    </span><span class="n">send</span><span class="p">(</span><span class="n">UNAUTHORIZED_401</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Go away!&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// Halt with status and message</span>
<span class="w">    </span><span class="n">internalServerError</span><span class="p">(</span><span class="s">&quot;Body Message&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// Halt with message (status 500)</span>
<span class="w">    </span><span class="n">internalServerError</span><span class="p">()</span><span class="w">               </span><span class="c1">// Halt with status 500</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="redirects">Redirects<a class="headerlink" href="#redirects" title="Permanent link">&para;</a></h3>
<p>You can redirect requests (returning 30x codes) by using <code>Call</code> utility methods:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">get</span><span class="p">(</span><span class="s">&quot;/redirect&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">send</span><span class="p">(</span><span class="n">FOUND_302</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/call&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// browser redirect to /call</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="cookies">Cookies<a class="headerlink" href="#cookies" title="Permanent link">&para;</a></h3>
<p>The request and response cookie functions provide a convenient way for sharing information between
handlers, requests, or even servers.</p>
<p>You can read client sent cookies from the request's <code>cookies</code> read only map. To change cookies or
add new ones you have to use <code>response.addCookie()</code> and <code>response.removeCookie()</code> methods.</p>
<p>Check the following sample code for details:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">get</span><span class="p">(</span><span class="s">&quot;/cookie&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">cookies</span><span class="w">                     </span><span class="c1">// Get map of all request cookies</span>
<span class="w">    </span><span class="n">request</span><span class="p">.</span><span class="na">cookiesMap</span><span class="p">()</span><span class="o">[</span><span class="s">&quot;foo&quot;</span><span class="o">]</span><span class="w">         </span><span class="c1">// Access request cookie by name</span>

<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">cookie</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Cookie</span><span class="p">(</span><span class="s">&quot;new_foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bar&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ok</span><span class="p">(</span>
<span class="w">        </span><span class="n">cookies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listOf</span><span class="p">(</span>
<span class="w">            </span><span class="n">cookie</span><span class="p">,</span><span class="w">                     </span><span class="c1">// Set cookie with a value</span>
<span class="w">            </span><span class="n">cookie</span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">maxAge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3600</span><span class="p">),</span><span class="w"> </span><span class="c1">// Set cookie with a max-age</span>
<span class="w">            </span><span class="n">cookie</span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">secure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">),</span><span class="w"> </span><span class="c1">// Secure cookie</span>
<span class="w">            </span><span class="n">cookie</span><span class="p">.</span><span class="na">delete</span><span class="p">(),</span><span class="w">            </span><span class="c1">// Remove cookie</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!-- TODO End -->

<h2 id="error-handling">Error Handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h2>
<p>You can provide handlers for runtime errors. Errors are unhandled exceptions in the callbacks, or
handlers returning error codes.</p>
<h3 id="http-errors-handlers">HTTP Errors Handlers<a class="headerlink" href="#http-errors-handlers" title="Permanent link">&para;</a></h3>
<p>Allow handling responses that returned an HTTP error code. Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">exception</span><span class="o">&lt;</span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">internalServerError</span><span class="p">(</span><span class="s">&quot;Root handler&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Register handler for routes halted with 512 code</span>
<span class="k">get</span><span class="p">(</span><span class="s">&quot;/errors&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="m">512</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="n">before</span><span class="p">(</span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">512</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="n">INTERNAL_SERVER_ERROR_500</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Ouch&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="exception-mapping">Exception Mapping<a class="headerlink" href="#exception-mapping" title="Permanent link">&para;</a></h3>
<p>You can handle previously thrown exceptions of a given type (or subtype). The handler allows you to
refer to the thrown exception. Look at the following code for a detailed example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Register handler for routes which callbacks throw exceptions</span>
<span class="k">get</span><span class="p">(</span><span class="s">&quot;/exceptions&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">error</span><span class="p">(</span><span class="s">&quot;Message&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="k">get</span><span class="p">(</span><span class="s">&quot;/codedExceptions&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="m">509</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;code&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="n">before</span><span class="p">(</span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">509</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">send</span><span class="p">(</span><span class="m">599</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">exception</span><span class="o">&lt;</span><span class="n">IllegalStateException</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">send</span><span class="p">(</span><span class="n">HTTP_VERSION_NOT_SUPPORTED_505</span><span class="p">,</span><span class="w"> </span><span class="n">exception</span><span class="o">?.</span><span class="na">message</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="s">&quot;empty&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="static-files">Static Files<a class="headerlink" href="#static-files" title="Permanent link">&para;</a></h2>
<p>You can use a [FileCallback] or a [UrlCallback] to route requests to files or classpath resources.</p>
<p>Those callbacks can point to folders or to files. If they point to a folder, the pattern should
have a parameter to provide the file to be fetched inside the folder.</p>
<p>Check the next example for details:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">get</span><span class="p">(</span><span class="s">&quot;/web/file.txt&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;It matches this route and won&#39;t search for the file&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="c1">// Expose resources on the &#39;/public&#39; resource folder over the &#39;/web&#39; HTTP path</span>
<span class="n">on</span><span class="p">(</span>
<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NOT_FOUND_404</span><span class="p">,</span>
<span class="w">    </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/web/*&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UrlCallback</span><span class="p">(</span><span class="n">urlOf</span><span class="p">(</span><span class="s">&quot;classpath:public&quot;</span><span class="p">))</span>
<span class="p">)</span>

<span class="c1">// Maps resources on &#39;assets&#39; on the server root (assets/f.css -&gt; /f.css)</span>
<span class="c1">// &#39;/public/css/style.css&#39; resource would be: &#39;http://{host}:{port}/css/style.css&#39;</span>
<span class="n">on</span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NOT_FOUND_404</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/*&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UrlCallback</span><span class="p">(</span><span class="n">urlOf</span><span class="p">(</span><span class="s">&quot;classpath:assets&quot;</span><span class="p">)))</span>
</code></pre></div></td></tr></table></div>
<h3 id="media-types">Media Types<a class="headerlink" href="#media-types" title="Permanent link">&para;</a></h3>
<p>The media types of static files are computed from the file extension using the utility methods of
the <a href="../api/core/com.hexagontk.core.media">com.hexagontk.core.media</a> package.</p>
<h2 id="cors">CORS<a class="headerlink" href="#cors" title="Permanent link">&para;</a></h2>
<p>CORS behaviour can be different depending on the path. You can attach different <a href="../api/http/http_server/com.hexagontk.http.server.callbacks/-cors-callback">CORS Callbacks</a> to
different handlers. Check the <a href="../api/http/http_server/com.hexagontk.http.server.callbacks/-cors-callback">CorsCallback</a> class for more details.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">path</span><span class="p">:</span><span class="w"> </span><span class="n">PathHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">corsPath</span><span class="p">(</span><span class="s">&quot;/default&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CorsHandler</span><span class="p">(</span><span class="n">CorsCallback</span><span class="p">()))</span>
<span class="w">    </span><span class="n">corsPath</span><span class="p">(</span><span class="s">&quot;/example/org&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CorsHandler</span><span class="p">(</span><span class="n">allowedOrigin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;example.org&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="n">corsPath</span><span class="p">(</span><span class="s">&quot;/no/credentials&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CorsHandler</span><span class="p">(</span><span class="n">supportCredentials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">))</span>
<span class="w">    </span><span class="n">corsPath</span><span class="p">(</span><span class="s">&quot;/only/post&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CorsHandler</span><span class="p">(</span><span class="n">allowedMethods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setOf</span><span class="p">(</span><span class="n">POST</span><span class="p">)))</span>
<span class="w">    </span><span class="n">corsPath</span><span class="p">(</span><span class="s">&quot;/cache&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CorsHandler</span><span class="p">(</span><span class="n">preFlightMaxAge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">))</span>
<span class="w">    </span><span class="n">corsPath</span><span class="p">(</span><span class="s">&quot;/exposed/headers&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CorsHandler</span><span class="p">(</span><span class="n">exposedHeaders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setOf</span><span class="p">(</span><span class="s">&quot;head&quot;</span><span class="p">)))</span>
<span class="w">    </span><span class="n">corsPath</span><span class="p">(</span><span class="s">&quot;/allowed/headers&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CorsHandler</span><span class="p">(</span><span class="n">allowedHeaders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setOf</span><span class="p">(</span><span class="s">&quot;head&quot;</span><span class="p">)))</span>
<span class="p">}</span>

<span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="n">HandlerBuilder</span><span class="p">.</span><span class="nf">corsPath</span><span class="p">(</span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="n">cors</span><span class="p">:</span><span class="w"> </span><span class="n">CorsHandler</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// CORS settings can change for different routes</span>
<span class="w">        </span><span class="n">use</span><span class="p">(</span><span class="n">cors</span><span class="p">)</span>

<span class="w">        </span><span class="k">get</span><span class="p">(</span><span class="s">&quot;/path&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">post</span><span class="p">(</span><span class="s">&quot;/path&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;/path&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">delete</span><span class="p">(</span><span class="s">&quot;/path&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="k">get</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">post</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">put</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">delete</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="https">HTTPS<a class="headerlink" href="#https" title="Permanent link">&para;</a></h2>
<p>It is possible to start a secure server enabling HTTPS. For this, you have to provide a server
certificate and its key in the server's <a href="../api/http/http/com.hexagontk.http/-ssl-settings">SslSettings</a>. Once you use a server certificate, it is also
possible to serve content using <a href="https://en.wikipedia.org/wiki/HTTP/2">HTTP/2</a>, for this to work, <a href="https://en.wikipedia.org/wiki/Application-Layer_Protocol_Negotiation">ALPN</a> is required (however, this is
already handled if you use Java 11).</p>
<p>The certificate common name should match the host that will serve the content in order to be
accepted by an HTTP client without a security error. There is a <a href="https://gradle.org">Gradle</a> helper to
<a href="../gradle/#certificates">create sample certificates</a> for development purposes.</p>
<p>HTTP clients can also be configured to use a certificate. This is required to implement a double
ended authorization (<a href="https://en.wikipedia.org/wiki/Mutual_authentication">mutual TLS</a>). This is also done by passing an <a href="../api/http/http/com.hexagontk.http/-ssl-settings">SslSettings</a> object the HTTP
client.</p>
<p>If you want to implement mutual trust, you must enforce client certificate in the server
configuration (check <a href="../api/http/http/com.hexagontk.http/-ssl-settings">SslSettings.clientAuth</a>). If this is done, you can access the certificate the
client used to connect (assuming it is valid, if not the connection will end with an error) with the
<a href="../api/http/http/com.hexagontk.http.model/-http-request">Request.certificateChain</a> property.</p>
<p>Below you can find a simple example to set up an HTTPS server and client with mutual TLS:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Key store files</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">identity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;hexagontk.p12&quot;</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">trust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;trust.p12&quot;</span>

<span class="c1">// Default passwords are file name reversed</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">keyStorePassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">identity</span><span class="p">.</span><span class="na">reversed</span><span class="p">()</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">trustStorePassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trust</span><span class="p">.</span><span class="na">reversed</span><span class="p">()</span>

<span class="c1">// Key stores can be set as URIs to classpath resources (the triple slash is needed)</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">keyStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">urlOf</span><span class="p">(</span><span class="s">&quot;classpath:ssl/</span><span class="si">$</span><span class="n">identity</span><span class="s">&quot;</span><span class="p">)</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">trustStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">urlOf</span><span class="p">(</span><span class="s">&quot;classpath:ssl/</span><span class="si">$</span><span class="n">trust</span><span class="s">&quot;</span><span class="p">)</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">sslSettings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SslSettings</span><span class="p">(</span>
<span class="w">    </span><span class="n">keyStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">keyStore</span><span class="p">,</span>
<span class="w">    </span><span class="n">keyStorePassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">keyStorePassword</span><span class="p">,</span>
<span class="w">    </span><span class="n">trustStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trustStore</span><span class="p">,</span>
<span class="w">    </span><span class="n">trustStorePassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trustStorePassword</span><span class="p">,</span>
<span class="w">    </span><span class="n">clientAuth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">// Requires a valid certificate from the client (mutual TLS)</span>
<span class="p">)</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">serverSettings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HttpServerSettings</span><span class="p">(</span>
<span class="w">    </span><span class="n">bindPort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span>
<span class="w">    </span><span class="n">protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HTTPS</span><span class="p">,</span><span class="w"> </span><span class="c1">// You can also use HTTP2</span>
<span class="w">    </span><span class="n">sslSettings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sslSettings</span>
<span class="p">)</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HttpServer</span><span class="p">(</span><span class="n">serverAdapter</span><span class="p">(),</span><span class="w"> </span><span class="n">serverSettings</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// We can access the certificate used by the client from the request</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">subjectDn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">certificate</span><span class="p">()</span><span class="o">?.</span><span class="na">subjectX500Principal</span><span class="o">?.</span><span class="na">name</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="na">headers</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;cert&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">subjectDn</span><span class="p">)</span>
<span class="w">        </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="n">server</span><span class="p">.</span><span class="na">start</span><span class="p">()</span>

<span class="c1">// We&#39;ll use the same certificate for the client (in a real scenario it would be different)</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">clientSettings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HttpClientSettings</span><span class="p">(</span><span class="n">sslSettings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sslSettings</span><span class="p">)</span>

<span class="c1">// Create an HTTP client and make an HTTPS request</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HttpClient</span><span class="p">(</span><span class="n">clientAdapter</span><span class="p">(),</span><span class="w"> </span><span class="n">clientSettings</span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">baseUri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">serverBase</span><span class="p">(</span><span class="n">server</span><span class="p">)))</span>
<span class="n">client</span><span class="p">.</span><span class="na">start</span><span class="p">()</span>
<span class="n">client</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">).</span><span class="na">apply</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Assure the certificate received (and returned) by the server is correct</span>
<span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="n">headers</span><span class="p">.</span><span class="na">require</span><span class="p">(</span><span class="s">&quot;cert&quot;</span><span class="p">).</span><span class="na">text</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;CN=hexagontk.com&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">body</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="websockets">WebSockets<a class="headerlink" href="#websockets" title="Permanent link">&para;</a></h2>
<p>A Web Socket is an HTTP(S) connection made with the GET method and the <code>upgrade: websocket</code> and
<code>connection: upgrade</code> headers.</p>
<p>If the server is handling HTTPS connections, the client should use
the WSS protocol.</p>
<p>When the server receives such a request, it is handled as any other route, and if everything is ok
the connection is converted to a permanent full duplex socket.</p>
<p>If the HTTP request is correct, callbacks should be supplied to handle WS events. Otherwise, if
standard HTTP errors are returned, the connection is closed. This gives the programmer an
opportunity to check the request format or authorization.</p>
<p>Once the WS session is created (after checking the upgrade request is correct), the upgrade request
data can be accessed inside the WS session.</p>
<p>Sessions connected to the same WS endpoint can be stored to broadcast messages.</p>
<p>Ping and pong allows to maintain connection opened.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="nv">sessions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">emptyMap</span><span class="o">&lt;</span><span class="kt">Int</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">WsSession</span><span class="o">&gt;&gt;</span><span class="p">()</span>

<span class="kd">override</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">handler</span><span class="p">:</span><span class="w"> </span><span class="n">HttpHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ws</span><span class="p">(</span><span class="s">&quot;/ws/{id}&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Path parameters can also be accessed on WS handlers like `onText`</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">idParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pathParameters</span><span class="p">.</span><span class="na">require</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// Request is handled like other HTTP methods, if errors, no WS connection is made</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">idParameter</span><span class="p">.</span><span class="na">toIntOrNull</span><span class="p">()</span>
<span class="w">            </span><span class="o">?:</span><span class="w"> </span><span class="k">return</span><span class="nd">@ws</span><span class="w"> </span><span class="n">badRequest</span><span class="p">(</span><span class="s">&quot;ID must be a number: </span><span class="si">$</span><span class="n">idParameter</span><span class="s">&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// Accepted returns the callbacks to handle WS requests</span>
<span class="w">        </span><span class="n">accepted</span><span class="p">(</span>
<span class="w">            </span><span class="c1">// All callbacks have their session as the receiver</span>
<span class="w">            </span><span class="n">onConnect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">val</span><span class="w"> </span><span class="nv">se</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sessions</span><span class="o">[</span><span class="n">id</span><span class="o">]</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="n">emptyList</span><span class="p">()</span>
<span class="w">                </span><span class="n">sessions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sessions</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">se</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">)</span>
<span class="w">            </span><span class="p">},</span>

<span class="w">            </span><span class="n">onBinary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bytes</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="c1">// The HTTP request data can be queried from the WS session</span>
<span class="w">                    </span><span class="kd">val</span><span class="w"> </span><span class="nv">certificateSubject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">certificate</span><span class="p">()</span><span class="o">?.</span><span class="na">subjectX500Principal</span><span class="o">?.</span><span class="na">name</span>
<span class="w">                    </span><span class="n">send</span><span class="p">(</span><span class="n">certificateSubject</span><span class="o">?.</span><span class="na">toByteArray</span><span class="p">()</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="n">byteArrayOf</span><span class="p">())</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>

<span class="w">            </span><span class="n">onText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="kd">val</span><span class="w"> </span><span class="nv">se</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sessions</span><span class="o">[</span><span class="n">id</span><span class="o">]</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="n">emptyList</span><span class="p">()</span>
<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">se</span><span class="p">)</span>
<span class="w">                    </span><span class="c1">// It is allowed to send data on previously stored sessions</span>
<span class="w">                    </span><span class="n">s</span><span class="p">.</span><span class="na">send</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="w">            </span><span class="p">},</span>

<span class="w">            </span><span class="c1">// Ping requests helps to maintain WS sessions opened</span>
<span class="w">            </span><span class="n">onPing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">pong</span><span class="p">(</span><span class="n">bytes</span><span class="p">)</span><span class="w"> </span><span class="p">},</span>

<span class="w">            </span><span class="c1">// Pong handlers should be used to check sent pings</span>
<span class="w">            </span><span class="n">onPong</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">send</span><span class="p">(</span><span class="n">bytes</span><span class="p">)</span><span class="w"> </span><span class="p">},</span>

<span class="w">            </span><span class="c1">// Callback executed when WS sessions are closed (on the server or client side)</span>
<span class="w">            </span><span class="n">onClose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">logger</span><span class="p">.</span><span class="na">info</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;</span><span class="si">$</span><span class="n">status</span><span class="s">: </span><span class="si">$</span><span class="n">reason</span><span class="s">&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">                </span><span class="kd">val</span><span class="w"> </span><span class="nv">se</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sessions</span><span class="o">[</span><span class="n">id</span><span class="o">]</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="n">emptyList</span><span class="p">()</span>
<span class="w">                </span><span class="n">sessions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sessions</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">se</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">this</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="compression">Compression<a class="headerlink" href="#compression" title="Permanent link">&para;</a></h2>
<p>Gzip encoding is supported on the Hexagon Toolkit, however, its implementation depends on the used
adapter. To turn on Gzip encoding, you need to enable that feature on the server settings. Check the
code below for an example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">serverSettings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HttpServerSettings</span><span class="p">(</span>
<span class="w">    </span><span class="n">bindPort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span>
<span class="w">    </span><span class="n">zip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="p">)</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HttpServer</span><span class="p">(</span><span class="n">serverAdapter</span><span class="p">(),</span><span class="w"> </span><span class="n">serverSettings</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="n">server</span><span class="p">.</span><span class="na">start</span><span class="p">()</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HttpClientSettings</span><span class="p">(</span><span class="n">URI</span><span class="p">(</span><span class="s">&quot;http://localhost:</span><span class="si">${</span><span class="n">server</span><span class="p">.</span><span class="na">runtimePort</span><span class="si">}</span><span class="s">&quot;</span><span class="p">))</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HttpClient</span><span class="p">(</span><span class="n">clientAdapter</span><span class="p">(),</span><span class="w"> </span><span class="n">settings</span><span class="p">)</span>
<span class="n">client</span><span class="p">.</span><span class="na">start</span><span class="p">()</span>

<span class="n">client</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Headers</span><span class="p">(</span><span class="n">Header</span><span class="p">(</span><span class="s">&quot;accept-encoding&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;gzip&quot;</span><span class="p">))).</span><span class="na">apply</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello World!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// &#39;content-encoding&#39; cannot be checked, the header is removed when response is decoded</span>
<span class="p">}</span>

<span class="n">client</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">).</span><span class="na">apply</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello World!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">assertNull</span><span class="p">(</span><span class="n">headers</span><span class="o">[</span><span class="s">&quot;content-encoding&quot;</span><span class="o">]</span><span class="p">)</span>
<span class="w">    </span><span class="n">assertNull</span><span class="p">(</span><span class="n">headers</span><span class="o">[</span><span class="s">&quot;Content-Encoding&quot;</span><span class="o">]</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>
<h3 id="integration-tests">Integration Tests<a class="headerlink" href="#integration-tests" title="Permanent link">&para;</a></h3>
<p>To test HTTP servers from outside using a real Adapter, you can create a server setting <code>0</code> as port.
This will pick a random free port which you can check later:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">router</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;Hi!&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">bindAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InetAddress</span><span class="p">.</span><span class="na">getLoopbackAddress</span><span class="p">()</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">serverSettings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HttpServerSettings</span><span class="p">(</span><span class="n">bindAddress</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">serve</span><span class="p">(</span><span class="n">serverAdapter</span><span class="p">(),</span><span class="w"> </span><span class="n">router</span><span class="p">,</span><span class="w"> </span><span class="n">serverSettings</span><span class="p">)</span>

<span class="n">server</span><span class="p">.</span><span class="na">use</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">HttpClient</span><span class="p">(</span><span class="n">clientAdapter</span><span class="p">(),</span><span class="w"> </span><span class="n">HttpClientSettings</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="na">binding</span><span class="p">)).</span><span class="na">use</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">it</span><span class="p">.</span><span class="na">start</span><span class="p">()</span>
<span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;Hi!&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">).</span><span class="na">body</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>To do this kind of tests without creating a custom server (using the real production code).
Check the <a href="https://github.com/hexagontk/gradle_starter/blob/main/src/test/kotlin/ApplicationTest.kt">tests of the starter projects</a>.</p>
<h2 id="package-comhexagontkhttpserver">Package com.hexagontk.http.server<a class="headerlink" href="#package-comhexagontkhttpserver" title="Permanent link">&para;</a></h2>
<p>This package defines server interfaces for HTTP server adapters.</p>
<h2 id="package-comhexagontkhttpservercallbacks">Package com.hexagontk.http.server.callbacks<a class="headerlink" href="#package-comhexagontkhttpservercallbacks" title="Permanent link">&para;</a></h2>
<p>Utility callbacks that can be used on handlers. Reuse a callback in different handlers (after,
filter, etc.).</p>
<h2 id="package-comhexagontkhttpserverhandlers">Package com.hexagontk.http.server.handlers<a class="headerlink" href="#package-comhexagontkhttpserverhandlers" title="Permanent link">&para;</a></h2>
<p>Contains the HTTP handlers implementation (on top of Core's general event handlers). It houses the
HTTP handlers (AfterHandler, OnHandler, PathHandler and FilterHandler) and the HTTP predicate.</p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
<footer class="md-footer">

  
  <nav class="md-footer__inner md-grid" aria-label="footer.title">

    
    <a
      href="../http_handlers/"
      class="md-footer__link md-footer__link--prev"
      rel="prev">

      <div class="md-footer__button md-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></div>
      <div class="md-footer__title">
        <div class="md-ellipsis">
          <span class="md-footer__direction">Previous</span>
          HTTP Handlers
        </div>
      </div>
    </a>
    

    
    <a
      href="../http_client/"
      class="md-footer__link md-footer__link--next"
      rel="next">

      <div class="md-footer__title">
        <div class="md-ellipsis">
          <span class="md-footer__direction">Next</span>
          HTTP Client
        </div>
      </div>
      <div class="md-footer__button md-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg></div>
    </a>
    
  </nav>
  

  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        <div class="md-footer-copyright__highlight">Made with <svg class="fa-heart" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"> <path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"></path></svg> by <a href="https://github.com/hexagontk/hexagon/graphs/contributors">OSS contributors</a>. Licensed under <a href="https://github.com/hexagontk/hexagon/blob/main/license.md">MIT License</a>
</div>
        
        <div class="md-footer-copyright__highlight">
        Powered by <a href="https://www.mkdocs.org">MkDocs</a>
        and <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a>
        </div>
        <div class="md-footer-copyright__highlight">
          If you want to contribute,
          <a href="https://github.com/hexagontk/hexagon/contribute">come on!</a>
        </div>
        <div class="social-buttons">
          <a
            class="github-button"
            href="https://github.com/sponsors/hexagontk"
            data-icon="octicon-heart"
            data-color-scheme="no-preference: light; light: light; dark: light;"
            aria-label="Sponsor @hexagontk on GitHub">Sponsor</a>
          <a
            class="github-button"
            href="https://github.com/hexagontk/hexagon"
            data-icon="octicon-star"
            data-show-count="true"
            aria-label="Star hexagontk/hexagon on GitHub">Star</a>
          <a
            class="github-button"
            href="https://github.com/hexagontk/hexagon/subscription"
            data-icon="octicon-eye"
            data-show-count="true"
            aria-label="Watch hexagontk/hexagon on GitHub">Watch</a>
          <a
            class="github-button"
            href="https://github.com/hexagontk/hexagon/fork"
            data-icon="octicon-git-branch"
            data-show-count="true"
            aria-label="Fork hexagontk/hexagon on GitHub">Fork</a>
          <a
            class="twitter-share-button"
            href="https://twitter.com/intent/tweet?text=Hexagon Toolkit">Post</a>
        </div>
        
      </div>
      <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/hexagontk" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://dev.to/hexagontk" target="_blank" rel="noopener" title="dev.to" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M120.1 208.3c-3.9-2.9-7.8-4.3-11.6-4.3H91.1v104.5h17.4c3.9 0 7.8-1.4 11.6-4.3s5.8-7.3 5.8-13.1v-69.7c0-5.8-2-10.2-5.8-13.1M404.1 32H43.9C19.7 32 .1 51.6 0 75.8v360.4C.1 460.4 19.7 480 43.9 480h360.2c24.2 0 43.8-19.6 43.9-43.8V75.8c-.1-24.2-19.7-43.8-43.9-43.8M154.2 291.2c0 18.8-11.6 47.3-48.4 47.3H59.4V173h47.4c35.4 0 47.4 28.5 47.4 47.3zm100.7-88.7h-53.3v38.4h32.6v29.6h-32.6v38.4h53.3v29.6h-62.2c-11.2.3-20.4-8.5-20.7-19.7V193.7c-.3-11.1 8.6-20.4 19.7-20.7h63.2zm103.6 115.3c-13.2 30.7-36.8 24.6-47.4 0L272.6 173h32.6l29.7 113.7L364.5 173h32.6l-38.5 144.8z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/hexagontk" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg>
    </a>
  
</div>
    </div>
  </div>
</footer>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.instant"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="https://buttons.github.io/buttons.js"></script>
      
        <script src="https://platform.twitter.com/widgets.js"></script>
      
    
  </body>
</html>